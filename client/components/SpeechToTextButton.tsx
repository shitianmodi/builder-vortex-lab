import { useState } from "react";

interface SpeechToTextButtonProps {
  onConvert: () => void;
  className?: string;
}

export default function SpeechToTextButton({
  onConvert,
  className = "",
}: SpeechToTextButtonProps) {
  const [isConverting, setIsConverting] = useState(false);

  const handleClick = () => {
    if (isConverting) return;

    setIsConverting(true);
    onConvert();

    // Simulate conversion process
    setTimeout(() => {
      setIsConverting(false);
    }, 3000);
  };

  return (
    <button
      onClick={handleClick}
      disabled={isConverting}
      className={`flex flex-col items-center gap-1 px-3 py-2 bg-white rounded-xl transition-colors ${
        isConverting ? "cursor-not-allowed opacity-70" : "hover:bg-gray-50"
      } ${className}`}
    >
      <svg width="24" height="24" viewBox="0 0 24 25" fill="none">
        {isConverting ? (
          <path
            d="M12 7.83696C12.3373 7.83696 12.6608 7.70297 12.8993 7.46447C13.1378 7.22598 13.2717 6.9025 13.2717 6.56522V4.02174C13.2717 3.68445 13.1378 3.36098 12.8993 3.12248C12.6608 2.88399 12.3373 2.75 12 2.75C11.6627 2.75 11.3392 2.88399 11.1007 3.12248C10.8622 3.36098 10.7283 3.68445 10.7283 4.02174V6.56522C10.7283 6.9025 10.8622 7.22598 11.1007 7.46447C11.3392 7.70297 11.6627 7.83696 12 7.83696ZM8.83761 7.5063L7.04022 5.71739C6.79744 5.47767 6.46999 5.34325 6.1288 5.34325C5.78762 5.34325 5.46017 5.47767 5.21739 5.71739C5.09851 5.83481 5.00427 5.97478 4.94021 6.12911C4.87615 6.28343 4.84356 6.449 4.84435 6.61609C4.84868 6.94995 4.98242 7.2691 5.21739 7.5063L7.04022 9.3037C7.27849 9.54226 7.60174 9.67644 7.93891 9.67674C8.19028 9.67652 8.43594 9.60181 8.64487 9.46206C8.8538 9.3223 9.01663 9.12376 9.11279 8.89152C9.20895 8.65928 9.23414 8.40375 9.18516 8.1572C9.13618 7.91066 9.01524 7.68416 8.83761 7.5063ZM2.25 12.5C2.25 12.8373 2.38399 13.1608 2.62248 13.3993C2.86098 13.6378 3.18445 13.7717 3.52174 13.7717H6.06522C6.4025 13.7717 6.72598 13.6378 6.96447 13.3993C7.20297 13.1608 7.33696 12.8373 7.33696 12.5C7.33696 12.1627 7.20297 11.8392 6.96447 11.6007C6.72598 11.3622 6.4025 11.2283 6.06522 11.2283H3.52174C3.18445 11.2283 2.86098 11.3622 2.62248 11.6007C2.38399 11.8392 2.25 12.1627 2.25 12.5ZM7.76087 15.4843C7.58562 15.4833 7.41209 15.519 7.25146 15.589C7.09084 15.6591 6.94667 15.7621 6.82826 15.8913L5.02239 17.6548C4.78629 17.8943 4.65393 18.2171 4.65393 18.5535C4.65393 18.8898 4.78629 19.2126 5.02239 19.4522C5.26229 19.6908 5.58692 19.8248 5.92533 19.8248C6.26373 19.8248 6.58836 19.6908 6.82826 19.4522L8.6087 17.6548C8.78361 17.48 8.9038 17.2581 8.95456 17.0161C9.00531 16.7742 8.98443 16.5226 8.89447 16.2923C8.80451 16.062 8.64938 15.863 8.44804 15.7195C8.24671 15.576 8.00791 15.4943 7.76087 15.4843ZM10.7283 20.9783C10.7283 21.3155 10.8622 21.639 11.1007 21.8775C11.3392 22.116 11.6627 22.25 12 22.25C12.3373 22.25 12.6608 22.116 12.8993 21.8775C13.1378 21.639 13.2717 21.3155 13.2717 20.9783V18.4348C13.2717 18.0975 13.1378 17.774 12.8993 17.5355C12.6608 17.297 12.3373 17.163 12 17.163C11.6627 17.163 11.3392 17.297 11.1007 17.5355C10.8622 17.774 10.7283 18.0975 10.7283 18.4348V20.9783ZM15.4337 15.8913C15.1955 16.1298 15.0618 16.453 15.0618 16.79C15.0618 17.127 15.1955 17.4502 15.4337 17.6887L17.2311 19.4861C17.4704 19.7231 17.793 19.857 18.1298 19.8591C18.4692 19.8574 18.7945 19.7236 19.037 19.4861C19.2724 19.2464 19.4035 18.9234 19.4015 18.5874C19.4034 18.4189 19.3714 18.2517 19.3073 18.0958C19.2432 17.94 19.1484 17.7986 19.0285 17.6802L17.2311 15.8913C16.9926 15.6531 16.6694 15.5194 16.3324 15.5194C15.9954 15.5194 15.6721 15.6531 15.4337 15.8913ZM21.75 12.5C21.75 12.1627 21.616 11.8392 21.3775 11.6007C21.139 11.3622 20.8155 11.2283 20.4783 11.2283H17.9348C17.5975 11.2283 17.274 11.3622 17.0355 11.6007C16.797 11.8392 16.663 12.1627 16.663 12.5C16.663 12.8373 16.797 13.1608 17.0355 13.3993C17.274 13.6378 17.5975 13.7717 17.9348 13.7717H20.4783C20.8155 13.7717 21.139 13.6378 21.3775 13.3993C21.616 13.1608 21.75 12.8373 21.75 12.5ZM17.9348 5.21717C17.6157 5.23215 17.3136 5.36509 17.087 5.59022L15.2726 7.41304C15.0345 7.65149 14.9007 7.97473 14.9007 8.31174C14.9007 8.64875 15.0345 8.97198 15.2726 9.21043C15.5125 9.44911 15.8371 9.58309 16.1755 9.58309C16.5139 9.58309 16.8386 9.44911 17.0785 9.21043L18.8759 7.41304C19.0657 7.23434 19.1961 7.00161 19.2492 6.74636C19.3024 6.49112 19.2758 6.2257 19.1731 5.98605C19.0704 5.74641 18.8965 5.54413 18.675 5.4066C18.4535 5.26907 18.1951 5.20294 17.9348 5.21717Z"
            fill="#B6C2DA"
          />
        ) : (
          <path
            d="M7.10809 22.8912C7.61038 22.8912 7.95195 22.6297 8.55452 22.0876L12.0302 19.004H18.4687C21.4618 19.004 23.0689 17.3467 23.0689 14.4033V6.70917C23.0689 3.76617 21.4618 2.10889 18.4687 2.10889H5.53095C2.54809 2.10889 0.930664 3.75632 0.930664 6.70917V14.4033C0.930664 17.3566 2.54766 19.004 5.53095 19.004H6.01309V21.6153C6.01309 22.3889 6.41509 22.8912 7.10809 22.8912ZM7.51952 21.053V18.14C7.51952 17.5979 7.31895 17.3866 6.76652 17.3866H5.54081C3.50209 17.3866 2.54766 16.352 2.54766 14.3935V6.70917C2.54766 4.7506 3.50209 3.72632 5.54124 3.72632H18.4687C20.4975 3.72632 21.4515 4.7506 21.4515 6.70917V14.3935C21.4515 16.352 20.4975 17.3866 18.4687 17.3866H11.9595C11.4071 17.3866 11.1161 17.4672 10.7338 17.8589L7.51952 21.053ZM6.88695 8.00517H17.1127C17.4341 8.00517 17.6955 7.75403 17.6955 7.42232C17.6955 7.10089 17.4341 6.84974 17.1127 6.84974H6.88695C6.8115 6.84882 6.73664 6.86301 6.66675 6.89145C6.59687 6.9199 6.53338 6.96204 6.48003 7.0154C6.42668 7.06875 6.38454 7.13223 6.35609 7.20212C6.32764 7.272 6.31346 7.34687 6.31438 7.42232C6.31438 7.75403 6.56552 8.00517 6.88695 8.00517ZM6.88695 11.2696H17.1127C17.4341 11.2696 17.6955 11.0185 17.6955 10.6867C17.6955 10.3756 17.4341 10.1043 17.1127 10.1043H6.88695C6.56552 10.1043 6.31438 10.3756 6.31438 10.6872C6.31438 11.0185 6.56552 11.2696 6.88695 11.2696ZM6.88695 14.5439H13.5367C13.8581 14.5439 14.1195 14.2932 14.1195 13.9717C14.1195 13.64 13.8581 13.379 13.5367 13.379H6.88695C6.56552 13.379 6.31438 13.6405 6.31438 13.9717C6.31438 14.2932 6.56552 14.5439 6.88695 14.5439Z"
            fill="#004DA9"
          />
        )}
      </svg>
      <span
        className={`text-sm ${isConverting ? "text-[#B6C2DA]" : "text-[#004DA9]"}`}
      >
        {isConverting ? "识别中" : "转文字"}
      </span>
    </button>
  );
}
